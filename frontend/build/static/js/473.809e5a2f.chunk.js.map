{"version":3,"file":"static/js/473.809e5a2f.chunk.js","mappings":"uJAEA,MAAMA,EAAcC,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYC,uBAAyB,GACnDC,EAAMH,EAAW,GAAAI,OAAMJ,EAAYK,QAAQ,MAAO,IAAG,QAAS,OA8B7DC,eAAeC,EAAuBC,GAC3C,IAEE,aADkBC,EAAAA,EAAMC,IAAI,GAADN,OAAID,EAAG,WAAAC,OAAUI,EAAO,kBACxCG,MAAQ,CAAC,CACtB,CAAE,MAAOC,GAGP,OADAC,QAAQC,KAAK,2CAA4CF,EAAIG,SACtD,CAAC,CACV,CACF,C","sources":["lib/hrAdapter.js"],"sourcesContent":["import axios from 'axios';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || '';\nconst API = BACKEND_URL ? `${BACKEND_URL.replace(/\\/$/, '')}/api` : '/api';\n\nexport async function getStaffByCode(staffCode) {\n  // Try backend endpoint commonly available; fallback to employees list filter\n  try {\n    const res = await axios.get(`${API}/employees?staffCode=${encodeURIComponent(staffCode)}`);\n    return res.data;\n  } catch (err) {\n    // fallback: fetch all employees and match code locally (may be expensive)\n    try {\n      const all = await axios.get(`${API}/employees`);\n      return (all.data || []).find(e => e.employee_id === String(staffCode) || e.id === Number(staffCode)) || null;\n    } catch (err2) {\n      console.error('hrAdapter.getStaffByCode error', err, err2);\n      return null;\n    }\n  }\n}\n\nexport async function verifyPin(staffId, pin) {\n  // backend may provide a verify endpoint; otherwise this will fail gracefully\n  try {\n    const res = await axios.post(`${API}/staff/verify-pin`, { staffId, pin });\n    return res.data && res.data.valid === true;\n  } catch (err) {\n    console.warn('verifyPin endpoint not available, falling back to false');\n    return false;\n  }\n}\n\nexport async function getPermissionsForStaff(staffId) {\n  try {\n    const res = await axios.get(`${API}/staff/${staffId}/permissions`);\n    return res.data || {};\n  } catch (err) {\n    // fallback: empty permissions\n    console.warn('getPermissionsForStaff fallback to empty', err.message);\n    return {};\n  }\n}\n"],"names":["BACKEND_URL","process","REACT_APP_BACKEND_URL","API","concat","replace","async","getPermissionsForStaff","staffId","axios","get","data","err","console","warn","message"],"sourceRoot":""}